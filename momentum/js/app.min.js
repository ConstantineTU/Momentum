import playList from"./playList.js";let isApiFlickr,isApiUnsplash,timeIsHidden,dateIsHidden,greetingIsHidden,quoteIsHidden,weatherIsHidden,playerIsHidden,todoIsHidden,isRussian=!1;function eventListenersSettingsBlocks(){const e=document.querySelector(".time-block"),t=document.querySelector(".time"),o=document.querySelector(".date-block"),s=document.querySelector(".date"),a=document.querySelector(".greeting-block"),n=document.querySelector(".greeting-container"),i=document.querySelector(".quote-block"),l=document.querySelector(".quotes-wrap"),r=document.querySelector(".weather-block"),c=document.querySelector(".weather"),d=document.querySelector(".player-block"),u=document.querySelector(".player"),m=document.querySelector(".todolist-block"),g=document.querySelector(".todo-wrap"),p=document.querySelector(".todo-icon");"true"===localStorage.getItem("timeIsHidden")?(timeIsHidden=!0,t.classList.add("hide"),e.classList.remove("active")):"false"===localStorage.getItem("timeIsHidden")&&(timeIsHidden=!1,t.classList.remove("hide"),e.classList.add("active")),"true"===localStorage.getItem("dateIsHidden")?(dateIsHidden=!0,s.classList.add("hide"),o.classList.remove("active")):"false"===localStorage.getItem("dateIsHidden")&&(dateIsHidden=!1,s.classList.remove("hide"),o.classList.add("active")),"true"===localStorage.getItem("greetingIsHidden")?(greetingIsHidden=!0,n.classList.add("hide"),a.classList.remove("active")):"false"===localStorage.getItem("greetingIsHidden")&&(greetingIsHidden=!1,n.classList.remove("hide"),a.classList.add("active")),"true"===localStorage.getItem("quoteIsHidden")?(quoteIsHidden=!0,l.classList.add("hide"),i.classList.remove("active")):"false"===localStorage.getItem("quoteIsHidden")&&(quoteIsHidden=!1,l.classList.remove("hide"),i.classList.add("active")),"true"===localStorage.getItem("weatherIsHidden")?(weatherIsHidden=!0,c.classList.add("hide"),r.classList.remove("active")):"false"===localStorage.getItem("weatherIsHidden")&&(weatherIsHidden=!1,c.classList.remove("hide"),r.classList.add("active")),"true"===localStorage.getItem("playerIsHidden")?(playerIsHidden=!0,u.classList.add("hide"),d.classList.remove("active")):"false"===localStorage.getItem("playerIsHidden")&&(playerIsHidden=!1,u.classList.remove("hide"),d.classList.add("active")),"true"===localStorage.getItem("todoIsHidden")?(todoIsHidden=!0,g.classList.add("hide"),p.classList.add("hide"),m.classList.remove("active")):"false"===localStorage.getItem("todoIsHidden")&&(todoIsHidden=!1,g.classList.remove("hide"),p.classList.remove("hide"),m.classList.add("active")),e.addEventListener("click",(function(){this.classList.toggle("active"),t.classList.toggle("hide"),timeIsHidden=!timeIsHidden,localStorage.setItem("timeIsHidden",timeIsHidden)})),o.addEventListener("click",(function(){this.classList.toggle("active"),s.classList.toggle("hide"),dateIsHidden=!dateIsHidden,localStorage.setItem("dateIsHidden",dateIsHidden)})),a.addEventListener("click",(function(){this.classList.toggle("active"),n.classList.toggle("hide"),greetingIsHidden=!greetingIsHidden,localStorage.setItem("greetingIsHidden",greetingIsHidden)})),i.addEventListener("click",(function(){this.classList.toggle("active"),l.classList.toggle("hide"),quoteIsHidden=!quoteIsHidden,localStorage.setItem("quoteIsHidden",quoteIsHidden)})),r.addEventListener("click",(function(){this.classList.toggle("active"),c.classList.toggle("hide"),weatherIsHidden=!weatherIsHidden,localStorage.setItem("weatherIsHidden",weatherIsHidden)})),d.addEventListener("click",(function(){this.classList.toggle("active"),u.classList.toggle("hide"),playerIsHidden=!playerIsHidden,localStorage.setItem("playerIsHidden",playerIsHidden)})),m.addEventListener("click",(function(){this.classList.toggle("active"),g.classList.toggle("hide"),p.classList.toggle("hide"),todoIsHidden=!todoIsHidden,localStorage.setItem("todoIsHidden",todoIsHidden)}))}function showTime(){const e=document.querySelector(".time"),t=(new Date).toLocaleTimeString();e.textContent=t,showDate(),showGreeting(),setTimeout(showTime,1e3)}function showDate(){const e=document.querySelector(".date"),t=new Date,o={month:"long",day:"numeric",weekday:"long"};let s;s=isRussian?t.toLocaleDateString("ru-RU",o):t.toLocaleDateString("en-EN",o),e.textContent=s.replace(/(^|\s)\S/g,(function(e){return e.toUpperCase()}))}function getTimeOfDay(){const e=(new Date).getHours();return isRussian?e/6<1?"Доброй ночи,":e/6<2?"Доброе утро,":e/6<3?"Добрый день,":"Добрый вечер,":e/6<1?"night,":e/6<2?"morning,":e/6<3?"afternoon,":"evening,"}function showGreeting(){const e=document.querySelector(".greeting"),t=getTimeOfDay();let o;o=isRussian?""+t:"Good "+t,e.textContent=o}function setLocalStorage(){const e=document.querySelector(".name");localStorage.setItem("name",e.value)}function getLocalStorage(){const e=document.querySelector(".name");localStorage.getItem("name")&&"undefined"!==localStorage.getItem("name")&&(e.value=localStorage.getItem("name"))}isRussian=!(!localStorage.getItem("isRussian")||"undefined"===localStorage.getItem("isRussian"))&&"true"===localStorage.getItem("isRussian"),eventListenersSettingsBlocks(),showTime(),getTimeOfDay(),window.addEventListener("beforeunload",setLocalStorage),window.addEventListener("load",getLocalStorage);let randomNumForApi=randomNumber(0,19),randomNum=String(randomNumForApi+1).padStart(2,"0"),loading=!0;function randomNumber(e,t){let o=Math.ceil(e),s=Math.floor(t);return Math.floor(Math.random()*(s-o+1))+o}function getTimeOfDayForBg(){const e=(new Date).getHours();return e/6<1?"night":e/6<2?"morning":e/6<3?"afternoon":"evening"}function setBg(){const e=document.querySelector("body"),t=new Image;t.src=`https://raw.githubusercontent.com/ConstantineTU/stage1-tasks/assets/images/${getTimeOfDayForBg()}/${randomNum}.jpg`,t.onload=()=>{e.style.background=`url('https://raw.githubusercontent.com/ConstantineTU/stage1-tasks/assets/images/${getTimeOfDayForBg()}/${randomNum}.jpg') center/cover no-repeat`,setTimeout(()=>{loading=!0,document.querySelector(".slide-prev").classList.remove("disabled"),document.querySelector(".slide-next").classList.remove("disabled")},1200)}}function setBgFirstLoad(){const e=document.querySelector("body"),t=new Image;t.src=`https://raw.githubusercontent.com/ConstantineTU/stage1-tasks/assets/images/${getTimeOfDayForBg()}/${randomNum}.jpg`,t.onload=()=>{e.style.background=`url('https://raw.githubusercontent.com/ConstantineTU/stage1-tasks/assets/images/${getTimeOfDayForBg()}/${randomNum}.jpg') center/cover no-repeat`}}function getSlideNext(){loading&&(loading=!1,"20"==randomNum?(randomNum=1,randomNumForApi=0):(randomNum++,randomNumForApi++),randomNum=String(randomNum).padStart(2,"0"),isApiFlickr||isApiUnsplash?setBgApi():setBg())}function getSlidePrev(){loading&&(loading=!1,"01"==randomNum?(randomNum=20,randomNumForApi=19):(randomNum--,randomNumForApi--),randomNum=String(randomNum).padStart(2,"0"),isApiFlickr||isApiUnsplash?setBgApi():setBg())}setBgFirstLoad(),document.querySelector(".slide-prev").addEventListener("click",(function(){this.classList.add("disabled"),getSlidePrev()})),document.querySelector(".slide-next").addEventListener("click",(function(){this.classList.add("disabled"),getSlideNext()}));const city=document.querySelector(".city");localStorage.getItem("currentNameCity")&&"undefined"!==localStorage.getItem("currentNameCity")?city.value=localStorage.getItem("currentNameCity"):city.value="Minsk";let currentNameCity=city.value;async function getWeather(){const e=document.querySelector(".weather"),t=e.querySelector(".weather-icon"),o=e.querySelector(".temperature"),s=e.querySelector(".weather-description"),a=e.querySelector(".weather-error"),n=e.querySelector(".humidity"),i=e.querySelector(".wind");let l;l=isRussian?`https://api.openweathermap.org/data/2.5/weather?q=${currentNameCity}&lang=ru&appid=2c9de9201bfa2b88df09186fc2130c69&units=metric`:`https://api.openweathermap.org/data/2.5/weather?q=${currentNameCity}&lang=en&appid=2c9de9201bfa2b88df09186fc2130c69&units=metric`;const r=await fetch(l),c=await r.json();function d(){200===r.status?(e.classList.remove("error"),a.textContent="",city.value=c.name,weatherSave(city.value),t.className="weather-icon owf",t.classList.add("owf-"+c.weather[0].id),o.textContent=Math.floor(c.main.temp)+"°C",s.textContent=c.weather[0].description[0].toUpperCase()+c.weather[0].description.slice(1),isRussian?window.matchMedia("(max-width: 768.98px)").matches?(i.textContent=Math.floor(c.wind.speed)+" м/с",n.textContent=Math.floor(c.main.humidity)+"%"):(i.textContent=`Скорость ветра: ${Math.floor(c.wind.speed)} м/с`,n.textContent=`Влажность воздуха: ${Math.floor(c.main.humidity)}%`):window.matchMedia("(max-width: 768.98px)").matches?(i.textContent=Math.floor(c.wind.speed)+" m/s",n.textContent=Math.floor(c.main.humidity)+"%"):(i.textContent=`Wind speed: ${Math.floor(c.wind.speed)} m/s`,n.textContent=`Humidity: ${Math.floor(c.main.humidity)}%`)):400===r.status?(a.textContent=isRussian?"Введите название города.":"Enter city name",t.className="weather-icon owf",e.classList.add("error")):(e.classList.add("error"),a.textContent=isRussian?`Город '${currentNameCity}' не найден.`:`City '${currentNameCity}' not found`,t.className="weather-icon owf")}d(),window.addEventListener("resize",(function(){d()}))}function weatherSave(e){localStorage.setItem("currentNameCity",e)}getWeather(),city.addEventListener("change",(function(){currentNameCity=city.value,getWeather()}));let isAnimation=!1;async function getQuotes(){const e=document.querySelector(".quote"),t=document.querySelector(".author"),o=document.querySelector(".quote-print");let s;if(!isAnimation){s=isRussian?"assets/json/dataru.json":"assets/json/data.json";const a=await fetch(s),n=await a.json(),i=n.quotes[randomNumber(0,n.quotes.length-1)];t.style.transition="1s",t.style.opacity="0",function(){let s=0,a="";function n(e,t){return Math.ceil(Math.random(t)*(t-e+1)+e)}setTimeout((function l(){a=`${a}${i.quote[s]}`,e.innerHTML='"'+a,o.classList.remove("end"),s++,a.length<i.quote.length?setTimeout(l,n(50,70)):(e.innerHTML=`"${a}"`,o.classList.add("end"),t.style.opacity="1",t.textContent=i.author,setTimeout(()=>{isAnimation=!1},500))}),n(50,70))}(),isAnimation=!0}}function animationQuote(){const e=document.querySelector(".change-quote");e.addEventListener("click",(function(){isAnimation||(isAnimation=!0,e.classList.add("rotate"),e.addEventListener("animationend",(function(){e.classList.remove("rotate")})))}))}getQuotes(),document.querySelector(".change-quote").addEventListener("click",getQuotes),animationQuote();let isPlay=!1;const audio=new Audio,audioName=document.querySelector(".track-name");let playNum,playItems;function playAudio(){const e=document.querySelectorAll(".play-item"),t=document.querySelector(".play");audio.src=playList[playNum].src,audioName.textContent=playList[playNum].title,isChangeSoundProgress=!1,e.forEach(e=>e.classList="play-item"),e[playNum].classList.add("item-active"),isPlay?(isPlay=!1,e[playNum].classList.remove("playing"),t.classList.remove("pause"),audio.paused||audio.pause()):(e[playNum].classList.add("playing"),isPlay=!0,localStorage.getItem("audioCurrentTime")&&!isNaN(localStorage.getItem("soundProgress-value"))?audio.currentTime=localStorage.getItem("audioCurrentTime"):audio.currentTime=0,t.classList.add("pause"),audio.play())}function playNext(){playNum>=playList.length-1?(playNum=0,audio.pause(),isPlay=!1):(playNum++,audio.pause(),isPlay=!1),localStorage.setItem("soundProgress-value","NaN"),localStorage.setItem("playNum",playNum),playAudio()}function playPrev(){playNum<=0?(playNum=playList.length-1,isPlay=!1,audio.pause()):(playNum--,isPlay=!1,audio.pause()),localStorage.setItem("soundProgress-value","NaN"),localStorage.setItem("playNum",playNum),playAudio()}function createPlayList(){for(let e=0;e<playList.length;e++){const t=document.createElement("li"),o=document.querySelector(".play-list");t.classList.add("play-item"),t.textContent=playList[e].title,o.append(t)}playItems=document.querySelectorAll(".play-item"),playItems[playNum].classList.add("item-active");for(let e=0;e<playItems.length;e++)playItems[e].addEventListener("click",(function(){playNum=e,localStorage.setItem("soundProgress-value","NaN"),localStorage.setItem("playNum",playNum),playItems[e].classList.contains("item-active")||(isPlay=!1,audio.pause()),playAudio()}))}playNum=localStorage.getItem("playNum")?localStorage.getItem("playNum"):0,audioName.textContent=playList[playNum].title,audio.src=playList[playNum].src,createPlayList(),audio.addEventListener("ended",playNext),document.querySelector(".play-next").addEventListener("click",playNext),document.querySelector(".play-prev").addEventListener("click",playPrev),document.querySelector(".play").addEventListener("click",playAudio);const volumeProgress=document.querySelector("#soundVolume"),volumeIcon=document.querySelector(".play-volume"),volumeContainer=document.querySelector(".volume-player");function muteVolume(){audio.muted?(volumeContainer.classList.remove("toggle"),audio.muted=!1,0===audio.volume&&(localStorage.getItem("volume-value")?(volumeProgress.style.background=localStorage.getItem("volume-progress"),audio.volume=localStorage.getItem("volume-value")/100,volumeProgress.value=localStorage.getItem("volume-value")/100):(volumeProgress.style.background="linear-gradient(to right, #c5b358 0%, #c5b358 30%, #c4c4c4 30%, #c4c4c4 100%)",volumeProgress.value=.3,audio.volume=.3))):(volumeContainer.classList.add("toggle"),audio.muted=!0)}function loadVolumeSettings(){localStorage.getItem("volume-value")?(volumeProgress.style.background=localStorage.getItem("volume-progress"),audio.volume=localStorage.getItem("volume-value")/100,volumeProgress.value=localStorage.getItem("volume-value")/100):(volumeProgress.style.background="linear-gradient(to right, #c5b358 0%, #c5b358 25%, #c4c4c4 25%, #c4c4c4 100%)",volumeProgress.value=.25,audio.volume=.25)}volumeProgress.addEventListener("change",(function(){const e=100*this.value;this.style.background=`linear-gradient(to right, #c5b358 0%, #c5b358 ${e}%, #c4c4c4 ${e}%, #c4c4c4 100%)`,e&&(localStorage.setItem("volume-progress",this.style.background),localStorage.setItem("volume-value",e))})),volumeProgress.addEventListener("input",(function(){const e=100*this.value;this.style.background=`linear-gradient(to right, #c5b358 0%, #c5b358 ${e}%, #c4c4c4 ${e}%, #c4c4c4 100%)`,audio.volume=e/100,audio.volume||volumeContainer.classList.contains("toggle")?audio.volume&&volumeContainer.classList.contains("toggle")&&(volumeContainer.classList.remove("toggle"),audio.muted=!1):(volumeContainer.classList.add("toggle"),audio.muted=!0)})),volumeIcon.addEventListener("click",muteVolume),loadVolumeSettings();const soundProgress=document.querySelector("#soundProgress");let isChangeSoundProgress=!1;function loadSoundSettings(){localStorage.getItem("soundProgress-value")?(soundProgress.style.background=localStorage.getItem("soundProgress"),soundProgress.value=localStorage.getItem("soundProgress-value")/100,audio.currentTime=localStorage.getItem("audioCurrentTime")):(soundProgress.style.background="linear-gradient(to right, #c5b358 0%, #c5b358 0%, #c4c4c4 0%, #c4c4c4 100%)",soundProgress.value=0,audio.currentTime=0)}function changeProgressAudio(){const e=document.getElementById("timer"),t=document.getElementById("duration");if(!isChangeSoundProgress&&!isNaN(audio.duration)){t.textContent=`${Math.floor(audio.duration/60)}:${String(Math.floor(audio.duration%60)).padStart(2,"0")}`;const o=100/audio.duration*audio.currentTime;soundProgress.value=100/audio.duration*audio.currentTime/100,soundProgress.style.background=`linear-gradient(to right, #c5b358 0%, #c5b358 ${o}%, #c4c4c4 ${o}%, #c4c4c4 100%)`,localStorage.setItem("soundProgress",soundProgress.style.background),localStorage.setItem("soundProgress-value",o),localStorage.setItem("audioCurrentTime",audio.currentTime),e.textContent=`${Math.floor(audio.currentTime/60)}:${String(Math.floor(audio.currentTime%60)).padStart(2,"0")}`}}function advacedPlayerUp(){const e=document.querySelector(".play-list"),t=document.querySelector(".play-list-button");t.addEventListener("click",(function(){e.classList.toggle("active"),t.classList.toggle("active")}))}soundProgress.addEventListener("change",(function(){isChangeSoundProgress=!1;const e=100*this.value;this.style.background=`linear-gradient(to right, #c5b358 0%, #c5b358 ${e}%, #c4c4c4 ${e}%, #c4c4c4 100%)`,localStorage.setItem("soundProgress",this.style.background),localStorage.setItem("soundProgress-value",e),audio.currentTime=audio.duration/100*e,localStorage.setItem("audioCurrentTime",audio.currentTime),timer.textContent=`${Math.floor(audio.currentTime/60)}:${String(Math.floor(audio.currentTime%60)).padStart(2,"0")}`})),soundProgress.addEventListener("input",(function(){isChangeSoundProgress=!0;const e=100*this.value;this.style.background=`linear-gradient(to right, #c5b358 0%, #c5b358 ${e}%, #c4c4c4 ${e}%, #c4c4c4 100%)`})),loadSoundSettings(),timer.textContent="0:00",duration.textContent="1:00",audio.addEventListener("timeupdate",changeProgressAudio),advacedPlayerUp();const engBtn=document.querySelector(".eng"),rusBtn=document.querySelector(".rus");function checkLanguage(){const e=document.querySelector(".weather"),t=document.querySelector(".city"),o=document.querySelector(".name"),s=document.querySelector(".time-block"),a=document.querySelector(".date-block"),n=document.querySelector(".greeting-block"),i=document.querySelector(".quote-block"),l=document.querySelector(".weather-block"),r=document.querySelector(".player-block"),c=document.querySelector(".todolist-block"),d=document.querySelector(".settings-subtittle"),u=document.getElementById("show"),m=document.getElementById("language"),g=document.getElementById("tegsForApi"),p=document.getElementById("imagesSource"),v=document.querySelector(".todo-input"),y=document.querySelector(".todo-tittle"),h=document.getElementById("todoDeleteDone"),I=document.getElementById("todoDeleteAll"),S=document.getElementById("todoDeleteBtn");isRussian?(e.classList.add("russian"),t.classList.add("russian"),t.placeholder="[Введите город]",o.placeholder="[Введите имя]",engBtn.textContent="Анг",rusBtn.textContent="Рус",s.textContent="Время",a.textContent="Дату",n.textContent="Приветствие",i.textContent="Цитату",l.textContent="Погоду",r.textContent="Аудиоплеер",c.textContent="Cписок дел",d.textContent="Настройки видимости панелей",u.textContent="Показать",m.textContent="Язык приложения",g.textContent="Теги",p.textContent="Источник изображений",v.placeholder="Новая задача",y.textContent="Задачи",h.textContent="Выполенные",I.textContent="Всё",S.textContent="Удалить",engBtn.classList.remove("active"),rusBtn.classList.add("active")):(e.classList.remove("russian"),t.classList.remove("russian"),t.placeholder="[Enter sity]",o.placeholder="[Enter name]",engBtn.textContent="Eng",rusBtn.textContent="Rus",s.textContent="Time",a.textContent="Date",n.textContent="Greeting",i.textContent="Quote",l.textContent="Weather",r.textContent="Audio",c.textContent="Todolist",d.textContent="Customize your dashboard",u.textContent="Show",m.textContent="Language",g.textContent="Tegs for API",p.textContent="Images source",v.placeholder="New todo",y.textContent="Todo",h.textContent="Done",I.textContent="All",S.textContent="Clear",engBtn.classList.add("active"),rusBtn.classList.remove("active")),setInterval(()=>{console.log("10 минут прошло, обновляю погоду"),checkLanguage()},6e5)}function changeLanguageEng(){isRussian&&(isRussian=!1,getQuotes(),showTime(),getWeather(),checkLanguage(),localStorage.setItem("isRussian",isRussian))}function changeLanguageRus(){isRussian||(isRussian=!0,getQuotes(),showTime(),getWeather(),checkLanguage(),localStorage.setItem("isRussian",isRussian))}let urlApiFlickr,urlApiUnsplash;checkLanguage(),engBtn.addEventListener("click",changeLanguageEng),rusBtn.addEventListener("click",changeLanguageRus);let apiFlickrBtn=document.querySelector(".flickr-api"),apiUnsplashBtn=document.querySelector(".unsplash-api"),githubBtn=document.querySelector(".github-api");async function getUnsplashToImage(){const e=`https://api.unsplash.com/photos/random?orientation=landscape&query=${getTimeOfDayForBg()},nature&client_id=4zlg7vxd_ulCb_aTpZiwXv16GCqGfAOXokIEwa_JBhM`,t=await fetch(e),o=await t.json();urlApiUnsplash=o.urls.regular,setTimeout(()=>{loading=!0,document.querySelector(".slide-prev").classList.remove("disabled"),document.querySelector(".slide-next").classList.remove("disabled")},1200)}getUnsplashToImage();const albomsFlickr={night:"https://www.flickr.com/services/rest/?method=flickr.galleries.getPhotos&api_key=87978b32968522241562a49c932bdf6b&gallery_id=185118123-72157720062587146&extras=url_h&format=json&nojsoncallback=1",morning:"https://www.flickr.com/services/rest/?method=flickr.galleries.getPhotos&api_key=87978b32968522241562a49c932bdf6b&gallery_id=185118123-72157720069530982&extras=url_h&format=json&nojsoncallback=1",afternoon:"https://www.flickr.com/services/rest/?method=flickr.galleries.getPhotos&api_key=87978b32968522241562a49c932bdf6b&gallery_id=185118123-72157720111881805&extras=url_h&format=json&nojsoncallback=1",evening:"https://www.flickr.com/services/rest/?method=flickr.galleries.getPhotos&api_key=87978b32968522241562a49c932bdf6b&gallery_id=185118123-72157720111880160&extras=url_h&format=json&nojsoncallback=1"};async function getFlickrToImage(){const e=albomsFlickr[getTimeOfDayForBg()],t=await fetch(e),o=await t.json();o.photos.photo[randomNumForApi].url_h?(urlApiFlickr=o.photos.photo[randomNumForApi].url_h,setTimeout(()=>{loading=!0,document.querySelector(".slide-prev").classList.remove("disabled"),document.querySelector(".slide-next").classList.remove("disabled")},1200)):(urlApiFlickr=`https://farm${o.photos.photo[randomNumForApi].farm}.staticflickr.com/${o.photos.photo[randomNumForApi].server}/${o.photos.photo[randomNumForApi].id}_${o.photos.photo[randomNumForApi].secret}.jpg`,setTimeout(()=>{loading=!0,document.querySelector(".slide-prev").classList.remove("disabled"),document.querySelector(".slide-next").classList.remove("disabled")},1200))}function setBgApi(){const e=document.querySelector("body"),t=new Image;isApiFlickr?(getFlickrToImage(),t.src=urlApiFlickr):isApiUnsplash?(getUnsplashToImage(),t.src=urlApiUnsplash):setBg(),t.onload=()=>{e.style.background=`url('${t.src}') center/cover no-repeat`}}getFlickrToImage(),apiFlickrBtn.addEventListener("click",(function(){githubBtn.classList.remove("active"),apiUnsplashBtn.classList.remove("active"),apiFlickrBtn.classList.add("active"),isApiFlickr=!0,isApiUnsplash=!1,localStorage.setItem("isApiFlickr",isApiFlickr),localStorage.setItem("isApiUnsplash",isApiUnsplash),setBgApi()})),apiUnsplashBtn.addEventListener("click",(function(){githubBtn.classList.remove("active"),apiUnsplashBtn.classList.add("active"),apiFlickrBtn.classList.remove("active"),isApiFlickr=!1,isApiUnsplash=!0,localStorage.setItem("isApiFlickr",isApiFlickr),localStorage.setItem("isApiUnsplash",isApiUnsplash),setBgApi()})),githubBtn.addEventListener("click",(function(){(isApiFlickr||isApiUnsplash)&&(githubBtn.classList.add("active"),apiUnsplashBtn.classList.remove("active"),apiFlickrBtn.classList.remove("active"),isApiFlickr=!1,isApiUnsplash=!1,localStorage.setItem("isApiFlickr",isApiFlickr),localStorage.setItem("isApiUnsplash",isApiUnsplash),setBg())}));const todoIcon=document.querySelector(".todo-icon"),todoWrap=document.querySelector(".todo-wrap"),settingsBtn=document.querySelector(".settings-icon"),settingsWrap=document.querySelector(".settings-wrap"),overlay=document.querySelector(".overlay");function showSettings(){todoIcon.classList.remove("active"),todoWrap.classList.remove("active"),settingsBtn.classList.toggle("active"),settingsWrap.classList.toggle("active"),settingsBtn.classList.contains("active")?overlay.classList.add("active"):overlay.classList.remove("active")}function closeAll(){overlay.classList.remove("active"),settingsBtn.classList.remove("active"),settingsWrap.classList.remove("active"),todoIcon.classList.remove("active"),todoWrap.classList.remove("active")}let todoItems;function getInputValue(){const e=document.querySelector(".todo-input");let t=[];for(let e=0;e<50;e++)localStorage.getItem("todoItems"+e)&&t.push(localStorage.getItem("todoItems"+e)),localStorage.getItem("doneItem"+e);for(let e=0;e<50;e++)localStorage.removeItem("todoItems"+e);for(let e=0;e<t.length;e++)localStorage.setItem("todoItems"+e,t[e]);for(let e=0;e<50;e++)if(localStorage.getItem("todoItems"+e)){const t=document.createElement("li"),s=document.querySelector(".todo-list"),a=document.createElement("div");a.classList.add("todo-controlls-trash"),t.classList.add("todo-item"),t.textContent=localStorage.getItem("todoItems"+e),t.append(a),s.append(t),todoItems=document.querySelectorAll(".todo-item");for(let e=0;e<todoItems.length;e++)todoItems[e].onclick=function(){todoItems[e].classList.toggle("done"),todoItems[e].classList.contains("done")?localStorage.setItem("doneItem"+e,e):localStorage.removeItem("doneItem"+e)};document.querySelectorAll(".todo-controlls-trash").forEach(e=>e.onclick=function(){o(this.parentNode)})}function o(t){for(let o=0;o<todoItems.length;o++)todoItems[o].classList.contains("done")&&t===todoItems[o]&&(localStorage.removeItem("todoItems"+o),todoItems[o].remove(),e.classList.remove("error"))}e.addEventListener("keypress",t=>{if(document.querySelectorAll(".todo-item").length<=30){e.classList.remove("error");const s=13;t.which==s&&""!==e.value&&function(){const t=document.createElement("li"),s=document.querySelector(".todo-list"),a=document.createElement("div");a.classList.add("todo-controlls-trash"),t.classList.add("todo-item"),t.textContent=e.value,t.append(a),s.append(t),e.value="",todoItems=document.querySelectorAll(".todo-item");for(let e=0;e<todoItems.length;e++)todoItems[e].classList.contains("done")||localStorage.setItem("todoItems"+e,todoItems[e].innerText),todoItems[e].onclick=function(){todoItems[e].classList.toggle("done"),todoItems[e].classList.contains("done")?localStorage.setItem("doneItem"+e,e):localStorage.removeItem("doneItem"+e)};document.querySelectorAll(".todo-controlls-trash").forEach(e=>e.onclick=function(){o(this.parentNode)})}()}else e.classList.add("error")}),function(){const t=document.getElementById("todoDeleteDone"),o=document.getElementById("todoDeleteAll"),s=document.getElementById("todoDeleteWrap"),a=document.getElementById("todoDeleteBtn"),n=document.getElementById("todoDeleteClose");function i(){a.classList.toggle("active"),s.classList.toggle("active")}a.addEventListener("click",i),n.addEventListener("click",i),o.addEventListener("click",(function(){if(todoItems)for(let t=0;t<todoItems.length;t++)localStorage.removeItem("todoItems"+t),todoItems[t].remove(),e.classList.remove("error");i()})),t.addEventListener("click",(function(){if(todoItems)for(let t=0;t<todoItems.length;t++)todoItems[t].classList.contains("done")&&(localStorage.removeItem("todoItems"+t),todoItems[t].remove(),e.classList.remove("error"));i()}))}()}settingsBtn.addEventListener("click",showSettings),overlay.addEventListener("click",closeAll),todoIcon.addEventListener("click",(function(){this.classList.toggle("active"),todoWrap.classList.toggle("active"),settingsBtn.classList.remove("active"),settingsWrap.classList.remove("active"),todoIcon.classList.contains("active")?overlay.classList.add("active"):overlay.classList.remove("active")})),getInputValue(),"true"===localStorage.getItem("isApiFlickr")?(isApiFlickr=!0,githubBtn.classList.remove("active"),apiUnsplashBtn.classList.remove("active"),apiFlickrBtn.classList.add("active"),setBgApi()):isApiFlickr=!1,"true"===localStorage.getItem("isApiUnsplash")?(isApiUnsplash=!0,githubBtn.classList.remove("active"),apiUnsplashBtn.classList.add("active"),apiFlickrBtn.classList.remove("active"),setBgApi()):isApiUnsplash=!1,console.group("%cCross-check: Momentum, ConstantineTU","color: red"),console.log("%cНе выполненные пункты: если источником получения фото указан API, в настройках приложения можно указать тег/теги, для которых API будет присылает фото 0 из 3","color: red"),console.log("Score 150 / 150\n\n\tВыполненные пункты: Все пункты, которые не указаны - выполены\n\tСвоя собственная фича - todolist справа снизу, он сохраняется при перезагрузке, выполненные задачи удаляются после перезагрузке или при нажатии на кнопку корзина\n\t помимо этого плеер сохраняет время и песню при перезагрузке.\n\t "),console.log("%cЕсли Unsplash API  выдаёт ошибку 403, то прошу вас перепроверить работу через 1 час, так как лимит на изображения закончился","color: blue"),console.log("\t%cИтого 157 баллов из 160","color: green"),console.log("%cМой дискорд - https://discordapp.com/users/414360051101466624 , если вам понравилась моя работа, пожалуйста добавьте её в лучшие https://forms.gle/Xc9RVjEWTTGF6ubK8","color: blue"),console.log("%cСпасибо за проверку и успехов в учёбе!","color: green"),console.groupEnd();